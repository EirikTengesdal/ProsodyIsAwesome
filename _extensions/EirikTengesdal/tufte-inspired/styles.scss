/* -----------------------------
   Title block and meta layout - Based on gold standard with improvements
------------------------------*/

.sidebar nav[role="doc-toc"] ul > li > a.active,
.sidebar nav[role="doc-toc"] ul > li > ul > li > a.active {
  border-left: 1px solid maroon;
  color: maroon !important;
}

.quarto-title-banner {
  margin-bottom: 0;
  background: transparent;
}

.bg-primary {
  --bs-bg-opacity: 1;
  background-color: #316e6b !important;
}

.btn {
  background-color: #316e6b !important;
}

.quarto-title-meta-heading {
  letter-spacing: .1em;
  margin-top: 0;
  text-transform: uppercase;
  font-size: .9rem;
  opacity: .8;
}

#title-block-header.quarto-title-block.default .quarto-title-meta-heading,
#title-block-header.quarto-title-block.default .abstract .block-title {
  margin-top: 0;
  font-size: .9rem;
}

.quarto-title-meta-contents p,
#title-block-header.quarto-title-block.default .keywords > p,
#title-block-header.quarto-title-block.default .description > p,
#title-block-header.quarto-title-block.default .abstract > p {
  font-size: 1rem;
  margin-top: -0.5rem;
  margin-bottom: 0; /* Remove bottom margin to fix spacing */
  line-height: 1.5;
}

@media (min-width: 992px) {
  .quarto-title-banner {
    padding-top: 2em;
  }
}

/* Link styling - hide PDF link text but keep email visible */
.quarto-title-meta-contents a:not(.quarto-title-author-email) {
  font-size: 0; /* Hide the original text for non-email links */
}

.quarto-title-meta-contents a[href$=".pdf"]::after {
  content: "PDF";
  font-size: 10.8pt;
}

/* Keep email links visible */
.quarto-title-meta-contents a.quarto-title-author-email {
  font-size: inherit !important;
}

#title-block-header {
  color: #747e7f; /* Default gray for general text */
  font-size: 90%;
  font-stretch: 90%;
  background-color: #E3E3EB !important;
}

/* Color stratification - Title and headings */
.quarto-title-banner h1, .quarto-title-banner .h1,
.quarto-title-banner h2, .quarto-title-banner .h2 {
  color: #545555;
}

/* Subtitle links */
.quarto-title-banner a {
  color: #545555;
}

/* Alternate format links - match meta content color */
#title-block-header .quarto-alternate-formats a {
  color: #545555;
}

/* Meta headings */
.quarto-title-meta-heading {
  color: #545555;
}

/* Meta contents */
.quarto-title-meta-contents {
  color: #545555;
}

/* Abstract title and content - matching meta styling */
#title-block-header .abstract .block-title {
  color: #545555;
}

#title-block-header .abstract > p {
  color: #545555;
}

/* Enhanced layout for proper three-column distribution with DATO centered */
#title-block-header .quarto-title-meta-container {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr; /* Three equal columns */
  align-items: flex-start;
  width: 100%;
  gap: 1rem;
}

/* Add bottom spacing to the entire header like in gold standard */
#title-block-header.quarto-title-block {
  padding-bottom: 2rem;
}

#title-block-header .quarto-title-meta-column-start {
  grid-column: 1 / 3; /* Takes first two columns */
  display: grid;
  grid-template-columns: 1fr 1fr; /* Split into two equal parts for author and date */
}

#title-block-header .quarto-title-meta-column-end {
  grid-column: 3; /* Takes third column */
  display: flex;
  justify-content: flex-end;
}

#title-block-header .quarto-title-meta {
  display: contents; /* Let grid handle the layout */
}

/* Individual meta items positioning */
#title-block-header .quarto-title-meta > div:first-child {
  grid-column: 1; /* Author in first column */
  justify-self: flex-start;
}

#title-block-header .quarto-title-meta > div:last-child {
  grid-column: 2; /* Date in second column */
  justify-self: center; /* Center the date */
}

#title-block-header .quarto-title-meta > div {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* Make abstract title uppercase like other meta headings */
#title-block-header .abstract .block-title {
  text-transform: uppercase;
  letter-spacing: .1em;
  opacity: .8;
}

/* Alternate formats styling within meta items */
#title-block-header .quarto-alternate-formats {
  display: flex;
  flex-direction: column;
  align-items: inherit; /* inherit alignment from parent meta item */
}

#title-block-header .quarto-alternate-formats .quarto-title-meta-heading,
#title-block-header .quarto-alternate-formats .quarto-title-meta-contents {
  display: block;
  margin: 0;
  line-height: 1.2; /* match other meta items */
}

#title-block-header .quarto-alternate-formats .quarto-title-meta-contents > p {
  margin-top: 0.1rem; /* minimal space between heading and value */
}

/* Hide empty formats blocks (Quarto sometimes emits an empty one) */
#title-block-header .quarto-alternate-formats .quarto-title-meta-contents:empty {
  display: none;
}
#title-block-header .quarto-alternate-formats .quarto-title-meta-heading:empty {
  display: none;
}

/* Do not hide link text in meta (authors, formats) */
#title-block-header .quarto-title-meta-contents a {
  font-size: inherit;
}

/* Make abstract title uppercase like other meta headings */
#title-block-header .abstract .block-title {
  text-transform: uppercase;
  letter-spacing: .1em;
  opacity: .8;
  margin-bottom: 0.1rem; /* match meta spacing */
}
/* Title banner tweaks */
.quarto-title-banner {
  margin-bottom: 0;
  background: transparent;
}

#title-block-header {
  color: #15141A; /* Black text instead of gray */
  font-size: 90%;
  font-stretch: 90%;
  background-color: #E3E3EB !important;
}

#title-block-header.quarto-title-block.default .quarto-title-meta-heading,
#title-block-header.quarto-title-block.default .abstract .block-title {
  margin-top: 0;
  font-size: .9rem;
}

.quarto-title-meta-heading {
  letter-spacing: .1em;
  margin-top: 0;
  text-transform: uppercase;
  font-size: .9rem;
  opacity: .8;
}

.quarto-title-meta-contents p,
#title-block-header.quarto-title-block.default .keywords > p,
#title-block-header.quarto-title-block.default .description > p,
#title-block-header.quarto-title-block.default .abstract > p {
  font-size: 1rem;
  margin-top: 0.1rem; /* reduced from -0.5rem for tighter spacing */
  line-height: 1.5;
}

@media (min-width: 992px) {
  .quarto-title-banner {
    padding-top: 2em;
  }
}

/* Link styling - make sure email links are visible but alternate format links show only PDF */
.quarto-title-meta-contents a:not(.quarto-title-author-email),
#title-block-header .quarto-alternate-formats a {
  font-size: 0 !important; /* Hide the original text only for non-email links */
}

/* Keep email links visible and properly styled */
.quarto-title-meta-contents a.quarto-title-author-email {
  font-size: inherit !important;
  color: #545555 !important; /* Match meta contents color */
  text-decoration: none !important;
  display: inline !important; /* Force visibility */
  font-family: "Arial", "Helvetica", sans-serif !important; /* Use system font for better symbol support */
}

/* Style all links in title block to match stratified colors */
#title-block-header a {
  color: #545555; /* Match meta color scheme */
  text-decoration: none;
}

#title-block-header a:hover {
  color: #5a6570; /* Slightly muted on hover */
  text-decoration: underline;
}

/* Document type links - override general title-block-header a rule */
#title-block-header .documenttype a {
  color: #AAAAA8;
}

.quarto-title-meta-contents a[href$=".pdf"]::after,
#title-block-header .quarto-alternate-formats a[href$=".pdf"]::after {
  content: "PDF";
  font-size: 10.8pt !important;
  color: #545555; /* Match alternate format text color */
}

#title-block-header {
  color: #15141A; /* Black text instead of gray */
  font-size: 90%;
  font-stretch: 90%;
  /* background-color: #8f1d1c0a !important; */
  background-color: #E3E3EB !important;
}

/* #E3E3EB = 90 % NavyBlue and #FFFFF8 https://meyerweb.com/eric/tools/color-blend/#000080:FFFFF8:8:hex */

/* .sidebar {
  font-family: sans-serif;
} */

div.sourceCode {
  background-color: #8f1d1c0a;
  border: 1px solid rgba(233,236,239,.65);
  border-radius: .375rem;
}

body {
  font-size: 15px;
  line-height: 2rem;
  quotes: "‘" "’";
  background-color: #fffff8;
}

.documenttype {
  font-family: sans-serif;
  text-transform: uppercase;
  letter-spacing: 1pt;
  font-size: initial;
  margin-bottom: 0;
}

.documenttype a {
  /* color: #bfbfbf; */
  color: #AAAAA8;
}

/* #AAAAA8 = 40 % gray + #FFFFF8 https://meyerweb.com/eric/tools/color-blend/#808080:FFFFF8:8:hex */

p {
  line-height: 2rem;
}

p, ol, ul {
  font-size: 1.4rem;
}

.csl-entry {
  font-size: 1.1rem;
}

:root {
  font-size: 15px;
}

.column-margin p {
  font-size: 1.1rem;
  line-height: 1.3;
}

div.hanging-indent {
  margin-left: 0;
  text-indent: 0;
}

.hanging-indent div.csl-entry {
  margin-left: 1.5em;
  text-indent: -1.5em;
}

h1.title {
  /* font-style: normal; */
  font-weight: 400 !important;
  /* margin-top: 2.1rem; */
  margin-top: 1rem;
  margin-bottom: 1.5rem !important;
  font-size: 3.2rem;
  line-height: 1;
}

h1.unnumbered {
  font-size: 2rem;
}

h1 {
  margin-top: 2.1rem;
  margin-bottom: 1rem;
  font-size: 2.2rem;
  line-height: 1;
}

h2 {
  font-size: 1.7rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
  line-height: 1;
}

.sidebar nav[role="doc-toc"] > h2 {
  font-size: 1rem;
}

.sidebar .toc-actions>h2,
.sidebar .toc-actions>.h2,
.sidebar .quarto-code-links>h2,
.sidebar .quarto-code-links>.h2,
.sidebar .quarto-other-links>h2,
.sidebar .quarto-other-links>.h2,
.sidebar .quarto-alternate-notebooks>h2,
.sidebar .quarto-alternate-notebooks>.h2,
.sidebar .quarto-alternate-formats>h2,
.sidebar .quarto-alternate-formats>.h2 {
  font-size: 1rem;
}

p.lead {
  margin-top: 1rem;
  margin-bottom: 1rem;
  font-size: 1.8rem;
  display: block;
  line-height: 1;
}

h1, h2, p.lead {
  font-style: italic;
  font-weight: 400;
}

main {
  margin-top: 0;
}

.panel-caption, .figure-caption, figcaption {
  color: #5a6570;
  font-size: 1.1rem;
  margin-bottom: .825rem;
  line-height: 1.3;
}

.figure-img {
  /* margin: auto; */
  margin: 0 -0.5rem 0;
}

.quarto-figure {
  margin-bottom: 0;
}

#quarto-appendix.default {
  padding-top: 1.5em;
  margin-top: 1.5em;
  background-color: #fffff8;
}

#quarto-appendix.default .quarto-appendix-heading {
  font-size: 1.5rem !important;
}

#quarto-appendix.default [role="doc-endnotes"] > ol, #quarto-appendix.default .quarto-appendix-contents > :not(h2):not(.h2) {
  font-size: 1.1rem;
}

:root {
  --bs-nav-link-font-size : 0.95rem;
}

pre code {
  font-size: 1rem;
}
.quarto-title-meta {
  display: flex;
  flex-direction: row;
  gap: 2em;
  align-items: center;
}

.quarto-title-meta-contents {
  display: inline-block;
  margin-right: 2em;
  vertical-align: middle;
}
.sidebar nav[role="doc-toc"] ul > li > a.active,
.sidebar nav[role="doc-toc"] ul > li > ul > li > a.active {
  border-left: 1px solid maroon;
  color: maroon !important;
}

.quarto-title-banner {
  margin-bottom: 0;
  background: transparent;
}

.bg-primary {
  --bs-bg-opacity: 1;
  background-color: #316e6b !important;
}


  .sidebar nav[role="doc-toc"] ul > li > a.active,
  .sidebar nav[role="doc-toc"] ul > li > ul > li > a.active {
    border-left: 1px solid maroon;
    color: maroon !important;
  }

  .quarto-title-banner {
    margin-bottom: 0;
    background: transparent;
  }

  .bg-primary {
    --bs-bg-opacity: 1;
    background-color: #316e6b !important;
  }

  .btn {
    background-color: #316e6b !important;
  }

  .quarto-title-meta-heading {
    letter-spacing: .1em;
    margin-top: 0;
    text-transform: uppercase;
    font-size: .9rem;
    opacity: .8;
  }

  /* Ensure title meta fields (author, date) are on the same line */
  .quarto-title-meta {
    display: flex;
    flex-direction: row;
    gap: 2em;
    align-items: center;
  }
  .quarto-title-meta-contents {
    display: inline-block;
    margin-right: 2em;
    vertical-align: middle;
  }

  #title-block-header.quarto-title-block.default .quarto-title-meta-heading, #title-block-header.quarto-title-block.default .abstract .block-title {
    margin-top: 0;
    font-size: .9rem;
  }

  .quarto-title-meta-contents p, #title-block-header.quarto-title-block.default .keywords > p, #title-block-header.quarto-title-block.default .description > p, #title-block-header.quarto-title-block.default .abstract > p {
    font-size: 1rem;
    margin-top: -0.5rem;
    line-height: 1.5;
  }

/* Only apply flex to the left meta column (author/date) */
/* Author, date, and alternate formats are now grid items, so no need for flex in columns */
.quarto-title-meta-column-start, .quarto-title-meta-column-end {
  display: contents;
}
.quarto-title-meta {
  display: flex;
  flex-direction: row;
  gap: 2em;
  align-items: flex-start;
  width: 100%;
}
.quarto-title-meta > div {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1 1 0;
  min-width: 0;
}
.quarto-title-meta-contents {
  margin-right: 0;
  vertical-align: top;
}

/* Align Andre formater to top in right column */
/* Andre formater is now a grid item, no special alignment needed */
.quarto-title-meta-column-end .quarto-alternate-formats {
  display: block;
  margin-top: 0;
  margin-right: 0;
  padding: 0;
}

/* Restore block layout for right meta column (Andre formater) */
.quarto-title-meta-column-end .quarto-alternate-formats {
  display: block;
}

#title-block-header.quarto-title-block.default .quarto-title-meta-heading, #title-block-header.quarto-title-block.default .abstract .block-title {
  margin-top: 0;
  font-size: .9rem;
}

.quarto-title-meta-contents p, #title-block-header.quarto-title-block.default .keywords > p, #title-block-header.quarto-title-block.default .description > p, #title-block-header.quarto-title-block.default .abstract > p {
  font-size: 1rem;
  margin-top: -0.5rem;
  line-height: 1.5;
}

/* -----------------------------
   Link and button colors
------------------------------*/

.bg-primary {
  --bs-bg-opacity: 1;
  background-color: #316e6b !important;
}

.btn {
  background-color: #316e6b !important;
}

/* -----------------------------
   TOC highlighting
------------------------------*/

.sidebar nav[role="doc-toc"] ul > li > a.active,
.sidebar nav[role="doc-toc"] ul > li > ul > li > a.active {
  border-left: 1px solid maroon;
  color: maroon !important;
}

.sidebar nav[role="doc-toc"] > h2,
.sidebar .toc-actions>h2,
.sidebar .toc-actions>.h2,
.sidebar .quarto-code-links>h2,
.sidebar .quarto-code-links>.h2,
.sidebar .quarto-other-links>h2,
.sidebar .quarto-other-links>.h2,
.sidebar .quarto-alternate-notebooks>h2,
.sidebar .quarto-alternate-notebooks>.h2,
.sidebar .quarto-alternate-formats>h2,
.sidebar .quarto-alternate-formats>.h2 {
  font-size: 1rem;
}

p.lead {
  margin-top: 1rem;
  margin-bottom: 1rem;
  font-size: 1.8rem;
  display: block;
  line-height: 1;
}

h1, h2, p.lead {
  font-style: italic;
  font-weight: 400;
}

main {
  margin-top: 0;
}

.panel-caption, .figure-caption, figcaption {
  color: #5a6570;
  font-size: 1.1rem;
  margin-bottom: .825rem;
  line-height: 1.3;
}

.figure-img {
  /* margin: auto; */
  margin: 0 -0.5rem 0;
}

.quarto-figure {
  margin-bottom: 0;
}

#quarto-appendix.default {
  padding-top: 1.5em;
  margin-top: 1.5em;
  background-color: #fffff8;
}

#quarto-appendix.default .quarto-appendix-heading {
  font-size: 1.5rem !important;
}

#quarto-appendix.default [role="doc-endnotes"] > ol, #quarto-appendix.default .quarto-appendix-contents > :not(h2):not(.h2) {
  font-size: 1.1rem;
}

:root {
  --bs-nav-link-font-size : 0.95rem;
}

pre code {
  font-size: 1rem;
}

/* Core Tufte Layout CSS */
.page-columns.page-full .page-column.page-full {
  max-width: none;
}

.page-columns.page-full .content {
  padding-left: 0;
  padding-right: 0;
}

.sidebar.margin-sidebar {
  position: sticky;
  overflow-y: auto;
  top: 0px;
  max-height: 100vh;
}

.column-margin {
  width: 200px;
  min-width: 200px;
  max-width: 200px;
  margin-left: 30px;
}

@media (max-width: 991.98px) {
  .column-margin {
    display: none;
  }
}

.margin-caption {
  margin-top: 0;
}

/* Responsive layout for Tufte style */
@media (min-width: 992px) {
  .page-layout-article {
    grid-template-columns: [screen-start] 1.5em [screen-start-inset] 1.5em [page-start page-start-inset] 1em [body-start-outset] 1em [body-start] 1fr [body-content-start] 5fr [body-content-end] 1fr [body-end] 1em [body-end-outset] 200px [page-end-inset page-end] 1.5em [screen-end-inset] 1.5em [screen-end];
  }
}

/* Fix for table margins in Tufte style */
.page-columns .column-body table {
  margin-left: 0;
  margin-right: 0;
}

/* Margin notes styling */
.column-margin .margin-note {
  font-size: 0.9rem;
  line-height: 1.3;
  margin-bottom: 1rem;
}

/* Sidebar TOC styling */
.sidebar nav[role="doc-toc"] {
  padding: 0;
}

.sidebar nav[role="doc-toc"] ul {
  list-style: none;
  padding-left: 0;
  margin-bottom: 0;
}

.sidebar nav[role="doc-toc"] ul > li {
  margin-bottom: 0.2rem;
}

.sidebar nav[role="doc-toc"] ul > li > a {
  display: block;
  padding: 0.25rem 0.5rem;
  color: #5a6570;
  text-decoration: none;
  border-left: 1px solid transparent;
}

.sidebar nav[role="doc-toc"] ul > li > a:hover {
  color: #000;
  border-left-color: #ddd;
}

/* Typography improvements */
blockquote {
  margin: 1.5em 0;
  padding-left: 1em;
  border-left: 3px solid #ddd;
  font-style: italic;
}

.table {
  font-size: 1.1rem;
}

.table th {
  font-weight: 600;
  border-bottom: 2px solid #dee2e6;
}

.table td {
  border-bottom: 1px solid #dee2e6;
}
